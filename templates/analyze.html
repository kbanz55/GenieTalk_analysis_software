<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>GENIETALK | Analyzed Data</title>
    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{{ url_for('static', filename='plugins/fontawesome-free/css/all.min.css') }}">
    <!-- icheck bootstrap -->
    <link rel="stylesheet" href="{{ url_for('static', filename='plugins/icheck-bootstrap/icheck-bootstrap.min.css') }}">
    <!-- Theme style -->
    <link rel="stylesheet" href="{{ url_for('static', filename='dist/css/adminlte.min.css') }}">
    <link href="https://cdn.datatables.net/2.0.2/css/dataTables.bootstrap5.css" rel="stylesheet">
    {#    <link href="https://cdn.datatables.net/responsive/3.0.0/css/responsive.bootstrap5.css" rel="stylesheet">#}
    <link href="https://cdn.datatables.net/buttons/3.0.1/css/buttons.bootstrap5.css" rel="stylesheet">
</head>
<body class="hold-transition layout-top-nav">
<div class="wrapper">

    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand-md navbar-light navbar-white">
        <div class="container">
            <a href="/" class="navbar-brand">
                <img src="#" alt="GENIETALK Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
                <span class="brand-text font-weight-light">GENIETALK</span>
            </a>

            <button class="navbar-toggler order-1" type="button" data-toggle="collapse" data-target="#navbarCollapse"
                    aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse order-3" id="navbarCollapse">
                <!-- Left navbar links -->
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a href="/" class="nav-link">Home</a>
                    </li>

                </ul>
            </div>

        </div>
    </nav>
    <!-- /.navbar -->

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <div class="content-header">
            <div class="container">
                <div class="row mb-2">
                    <div class="col-sm-6">
                        <h1 class="m-0"> Data Analyzed</h1>
                    </div><!-- /.col -->
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-right">
                            <li class="breadcrumb-item"><a href="/">Home</a></li>
                            <li class="breadcrumb-item active">Data Analyzed</li>
                        </ol>
                    </div><!-- /.col -->
                </div><!-- /.row -->
            </div><!-- /.container-fluid -->
        </div>
        <!-- /.content-header -->

        <!-- Main content -->
        <div class="content">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <!-- Custom Tabs -->
                        <div class="card">
                            <div class="card-header d-flex p-0">
                                <h3 class="card-title p-3">Data Analyzed</h3>
                                <ul class="nav nav-pills ml-auto p-2">
                                    <li class="nav-item"><a class="nav-link active" href="#tab_1" data-toggle="tab">Original
                                        Datas</a></li>
                                    <li class="nav-item"><a class="nav-link" href="#tab_2" data-toggle="tab">Cleaned
                                        Data</a></li>
                                    <li class="nav-item"><a class="nav-link" href="#tab_3" data-toggle="tab">Filtered
                                        Data</a>
                                    </li>
                                    <li class="nav-item"><a class="nav-link" href="#tab_4" data-toggle="tab">Metrics</a>
                                    </li>
                                    <li class="nav-item"><a class="nav-link" href="#tab_5" data-toggle="tab">Graphs</a>
                                    </li>
                                    <li class="nav-item"><a class="nav-link" href="#tab_6"
                                                            data-toggle="tab">Insights</a>
                                    </li>
                                </ul>
                            </div><!-- /.card-header -->
                            <div class="card-body">
                                <div class="tab-content">
                                    <div class="tab-pane active" id="tab_1">
                                        <div class="col-lg-12">
                                            {% if data_html %}
                                                <div class="card card-primary card-outline">
                                                    <div class="card-header">
                                                        {% for count, data in data_html %}
                                                            <h5 class="card-title m-0">Original Data {{ count }}</h5>
                                                        {% endfor %}
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="table-responsive">
                                                            {% for count, data in data_html %}
                                                                <br/>
                                                                {{ data|safe }}
                                                                <hr>  {% endfor %}
                                                        </div>

                                                    </div>
                                                </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <!-- /.tab-pane -->
                                    <div class="tab-pane" id="tab_2">
                                        <div class="col-lg-12">
                                            {% if data_html2 %}
                                                <div class="card card-primary card-outline">
                                                    <div class="card-header">
                                                        {% for count2, data2 in data_html2 %}
                                                            <h5 class="card-title m-0">Cleaned Data {{ count2 }}</h5>
                                                        {% endfor %}
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="table-responsive">
                                                            {% for count2, data2 in data_html2 %}
                                                                <br/>
                                                                {{ data2|safe }}
                                                                <hr>  {% endfor %}
                                                        </div>
                                                    </div>
                                                </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <!-- /.tab-pane -->
                                    <div class="tab-pane" id="tab_3">
                                        <div class="col-lg-12">
                                            {% if data_html3 %}
                                                <div class="card card-primary card-outline">
                                                    <div class="card-header">
                                                        {% for count3, data3 in data_html3 %}
                                                            <h5 class="card-title m-0">Filtered Data {{ count3 }}</h5>
                                                        {% endfor %}
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="table-responsive">
                                                            {% for count3, data3 in data_html3 %}
                                                                <br/>
                                                                {{ data3|safe }}
                                                                <hr>  {% endfor %}
                                                        </div>
                                                    </div>
                                                </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="tab-pane" id="tab_4">
                                        <div class="row">
                                            <div class="col-lg-7">
                                                <div class="card card-primary card-outline">
                                                    <div class="card-header">
                                                        <h5 class="card-title m-0">Metrics</h5>
                                                    </div>
                                                    <div class="card-body">
                                                        {% if metrics != null %}
                                                            <ul class="list-group">
                                                                {% for metric, value in metrics.items() %}
                                                                    <li class="list-group-item">{{ metric }} :</li>
                                                                {% endfor %}
                                                            </ul>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-5">
                                                <div class="card card-primary card-outline">
                                                    <div class="card-header">
                                                        <h5 class="card-title m-0">Value</h5>
                                                    </div>
                                                    <div class="card-body">
                                                        {% if metrics != null %}
                                                            <ul class="list-group">
                                                                {% for metric, value in metrics.items() %}
                                                                    <li class="list-group-item">{{ value }}</li>
                                                                {% endfor %}
                                                            </ul>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="tab-pane" id="tab_5">
                                        <div class="col-lg-12">
                                            <div class="card card-primary card-outline">
                                                <div class="card-header">
                                                    <h5 class="card-title m-0">Graphical Representation of the Cleaned
                                                        Dataset</h5>
                                                </div>
                                                <div class="card-body">
                                                    <div id="word_accuracy_chart"></div>
                                                    <div id="response_time_chart"></div>
                                                    <div id="barkeystroke_chart"></div>
                                                    <div id="words_per_minutes_chart"></div>
                                                    <div id="wordc_ch_s_chart"></div>
                                                    <div id="actualKs_chart"></div>
                                                    <div id="heatMaps_chart"></div>
                                                    <div id="characterSec_chart"></div>
                                                    <div id="keystroke_saving_chart"></div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="tab-pane" id="tab_6">
                                        <div class="col-lg-12">
                                            <div class="card card-primary card-outline">
                                                <div class="card-header">
                                                    <h5 class="card-title m-0">Insights of the Graphs Plotted</h5>
                                                </div>
                                                <div class="card-body">
                                                    <div class="callout callout-info">
                                                        <h5>First Graph Insight</h5>
                                                        <p>{{ firstGraphInsight }}</p>
                                                    </div>
                                                    <div class="callout callout-info">
                                                        <h5>Second Graph Insight</h5>
                                                        <p>{{ secondGraphInsight }}</p>
                                                    </div>
                                                    <div class="callout callout-info">
                                                        <h5>Third Graph Insight</h5>
                                                        <p>{{ thirdGraphInsight }}</p>
                                                    </div>
                                                    <div class="callout callout-info">
                                                        <h5>Fourth Graph Insight</h5>
                                                        <p>{{ fourthGraphInsight }}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <!-- /.tab-pane -->
                                </div>
                                <!-- /.tab-content -->
                            </div><!-- /.card-body -->
                        </div>
                        <!-- ./card -->
                    </div>
                    <!-- /.col -->
                </div>


                <!-- /.col-md-6 -->
            </div>
            <!-- /.row -->
        </div><!-- /.container-fluid -->
    </div>
    <!-- /.content -->
</div>
<!-- /.content-wrapper -->

<!-- Control Sidebar -->
<aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
</aside>
<!-- /.control-sidebar -->

<!-- Main Footer -->
<footer class="main-footer">
    <!-- To the right -->
    <div class="float-right d-none d-sm-inline">
        GENIETALK
    </div>
    <!-- Default to the left -->
    <strong>Copyright &copy; {{ today }} <a href="/">GENIETALK</a>.</strong> All rights reserved.
</footer>
</div>
<!-- ./wrapper -->

<!-- REQUIRED SCRIPTS -->

<!-- jQuery -->
<script src="{{ url_for('static', filename='plugins/jquery/jquery.min.js') }}"></script>
<!-- Bootstrap 4 -->
<script src="{{ url_for('static', filename='plugins/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
<!-- AdminLTE App -->
<script src="{{ url_for('static', filename='dist/js/adminlte.min.js') }}"></script>
<script src="https://cdn.datatables.net/2.0.2/js/dataTables.min.js"></script>
<script src="https://cdn.datatables.net/2.0.2/js/dataTables.bootstrap5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/3.0.1/js/dataTables.buttons.js"></script>
<script src="https://cdn.datatables.net/buttons/3.0.1/js/buttons.bootstrap5.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/3.0.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/3.0.1/js/buttons.print.min.js"></script>
<script src="https://cdn.datatables.net/buttons/3.0.1/js/buttons.colVis.min.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
    $(document).ready(function () {
        // new DataTable('.datatables', {
        //     responsive: true
        //  });

        new DataTable('.datatables', {
            layout: {
                topStart: {
                    buttons: ['csv']
                }
            }
        });
        {#let word_json = '{{ word_accuracy_chart|safe }}';#}
        {#let word = word_json.toString();#}
        {##}
        {#let response_json = '{{ response_time_chart|safe }}';#}
        {#let response = response_json.toString();#}

        let barchart_keystroke = '{{ barchart_keystroke|safe }}';
        let barkeystroke = barchart_keystroke.toString();

        let words_per_minutes = '{{ words_per_minutes|safe }}';
        let wordsperminutes = words_per_minutes.toString();

        let wordc_ch_s = '{{ wordc_ch_s|safe }}';
        let wordcharactervscharacterpersecond = wordc_ch_s.toString();

        {#let wordcount = '{{ wordcount|safe }}';#}
        {#let wordc = wordcount.toString();#}

        let actualKeystrokes = '{{ actualKeystrokes|safe }}';
        let actualKs = actualKeystrokes.toString();

        let heatMap = '{{ heatMap|safe }}';
        let heatMaps = heatMap.toString();

        let char_per_sec = '{{ char_per_sec|safe }}'
        let characterSec = char_per_sec.toString()

        let keystroke_saving = '{{ keystroke_saving|safe }}'
        let keystrokeSaving = keystroke_saving.toString()

        // Render charts using Plotly.js from JSON data passed by Flask app
        {#let word_accuracy_chart = JSON.parse(word);#}
        {#let response_time_chart = JSON.parse(response);#}
        let barkeystroke_chart = JSON.parse(barkeystroke);
        let words_per_minutes_chart = JSON.parse(wordsperminutes);
        let wordc_ch_s_chart = JSON.parse(wordcharactervscharacterpersecond);
        {#let wordcount_chart = JSON.parse(wordc);#}
        let actualKs_chart = JSON.parse(actualKs);
        {#let heatMaps_chart = JSON.parse(heatMaps);#}
        let characterSec_chart = JSON.parse(characterSec);
        {#let keystroke_saving_chart = JSON.parse(keystrokeSaving);#}
        let config = {
            responsive: true
        }
        {#Plotly.newPlot('word_accuracy_chart', word_accuracy_chart, config);#}
        {#Plotly.newPlot('response_time_chart', response_time_chart, config);#}
        Plotly.newPlot('barkeystroke_chart', barkeystroke_chart, config);
        Plotly.newPlot('words_per_minutes_chart', words_per_minutes_chart, config);
        Plotly.newPlot('wordc_ch_s_chart', wordc_ch_s_chart, config);
        {#Plotly.newPlot('wordcount_chart', wordcount_chart, config);#}
        {#Plotly.newPlot('actualKs_chart', actualKs_chart, config);#}
        {#Plotly.newPlot('heatMaps_chart', heatMaps_chart, config);#}
        Plotly.newPlot('characterSec_chart', characterSec_chart, config);
        {#Plotly.newPlot('keystroke_saving_chart', keystroke_saving_chart, config);#}
    });

</script>
</body>
</html>
